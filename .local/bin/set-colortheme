#!/usr/bin/env -S rust-script --cargo-output --
//! ```cargo
//! [dependencies]
//! cradle = "=0.0.11"
//! dirs = "=3.0.2"
//! ```

use cradle::*;
use std::thread;

fn main() {
    let colortheme = std::env::args().skip(1).next().unwrap();
    let apps = &[
        "alacritty",
        "desktop-background",
        "firefox",
        "nvim",
        "rofi",
        "sway",
    ];
    let mut threads = Vec::new();
    for i in apps {
        let colortheme_clone = colortheme.clone();
        threads.push(thread::spawn(move || {
            cmd_unit!(
                LogCommand,
                CurrentDir(dirs::home_dir().unwrap()),
                format!("./.config/{}/set-colortheme", i),
                colortheme_clone,
            )
        }));
    }
    for thread in threads {
        thread.join().unwrap();
    }
}
