zstyle ':completion:*' completer _complete
zstyle ':completion:*' completions unset
zstyle ':completion:*' file-sort name
zstyle ':completion:*' glob unset
zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' list-prompt '%SAt %p: Hit TAB for more, or the character to insert%s'
zstyle ':completion:*' matcher-list '' 'r:|[._-]=** r:|=**' 'm:{a-z}={A-Z}' 'l:|=* r:|=*'
zstyle ':completion:*' max-errors 2
zstyle ':completion:*' menu select=long
zstyle ':completion:*' preserve-prefix '//[^/]##/'
zstyle ':completion:*' prompt 'da hast du %e fehler gemacht'
zstyle ':completion:*' select-prompt '%SScrolling active: current selection at %p%s'
zstyle ':completion:*' squeeze-slashes true
zstyle ':completion:*' special-dirs true
zstyle :compinstall filename '/home/shahn/.zshrc'

bindkey -e

bindkey "^[[3~" delete-char
bindkey "^[3;5~" delete-char
bindkey '^[[H' beginning-of-line
bindkey '^[[F' end-of-line

TERM=xterm-256color

autoload -Uz compinit
compinit

# history
HISTFILE=~/.histfile
HISTSIZE=1000000
SAVEHIST=1000000
setopt HIST_IGNORE_SPACE HIST_IGNORE_ALL_DUPS APPEND_HISTORY
unsetopt BEEP AUTO_REMOVE_SLASH

autoload -U +X bashcompinit && bashcompinit
eval "$(stack --bash-completion-script stack)"

# make / a word separator
local WORDCHARS=${WORDCHARS//\//}

export EDITOR=$(which nvim)

export DARCS_ALWAYS_COLOR=1
export DARCS_DO_COLOR_LINES=1

export GPG_TTY=$(tty)

###########
# ALIASES #
###########

# ls colors
alias ls="ls --color -F"
alias l="ls -lh"
alias ll="ls -l"
alias la="ls -lha"
alias rtl="ls -rtlh"
alias lr="/bin/ls"

# deb stuff
alias debhavei="dpkg -l | grep -i "
alias debclean='wajig remove-orphans && sudo apt-get autoclean && sudo apt-get clean && sudo apt-get autoremove'
alias debdailyupgrade='sudo apt-get update && sudo apt-get dist-upgrade && debclean'
alias debdepends='apt-cache depends '
alias debrdepends='apt-cache rdepends '

alias -g "\&"="&>/dev/null&|"
alias -g "<>"="2>&1 | tee gean"

alias qmv='qmv --options=spaces '

alias qg='gitg --all \&'

alias view-dot='dot -Tpdf | okular - \&'
alias vd='dot -Tpdf | okular - \&'

alias xcopy='xclip -selection clipboard'

alias ga='git add -p'
alias gc='git checkout -p'
alias gd='git diff'
alias gdc='git diff --cached'
alias gma='git commit --amend'
alias gmas='git commit --amend --reuse-message HEAD'
alias gp='git push'
alias gs='git status'
alias gl='git log'
alias gn='git checkout -b'
alias gtree='git log --oneline --graph --decorate --remotes --branches'
alias gprune-missing-on-remote="git branch -vv | ag gone | tr -s ' ' | cut -d' ' -f2 | xargs -n 1 -p git branch -D"

alias lp='nice -n 19'

alias tf='terraform'
alias zc='vim ~/.zshrc'
alias reload='. ~/.zshrc'

alias a='atom . -n \&'

alias yell="kdialog --msgbox 'YELL!!!'"

alias isrunning='pgrep -a'
alias mp='mplayer -af scaletempo -ao jack -volume 80'
inkscape() {
  /usr/bin/inkscape $@ \&
}
okular() {
  /usr/bin/okular $@ \&
}

export N_PREFIX=$HOME/.local
REPORTTIME=60

source ~/.xsessionrc
source /usr/share/doc/fzf/examples/key-bindings.zsh

function htop-pgrep {
  local pattern="$1"
  local pids="$(pgrep -f "$pattern" | tr '\n' ',' | sed 's/.$//')"
  if [[ -n "$pids" ]]; then
    htop -p "$pids"
  else
    echo no process matching: "$pattern"
    return 1
  fi
}

eval "$(starship init zsh)"
